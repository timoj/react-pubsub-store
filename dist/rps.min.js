!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o(require("react")):"function"==typeof define&&define.amd?define(["react"],o):"object"==typeof exports?exports["react-pubsub-store"]=o(require("react")):t["react-pubsub-store"]=o(t.React)}(window,function(t){return function(t){var o={};function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,o){if(1&o&&(t=e(t)),8&o)return t;if(4&o&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var i in t)e.d(n,i,function(o){return t[o]}.bind(null,i));return n},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},e.p="",e(e.s=9)}([function(t,o){t.exports=function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}},function(t,o){function e(t,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}},function(t,o,e){var n=e(6),i=e(7);t.exports=function(t,o){return!o||"object"!==n(o)&&"function"!=typeof o?i(t):o}},function(t,o){function e(o){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(o)}t.exports=e},function(t,o,e){var n=e(8);t.exports=function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&n(t,o)}},function(o,e){o.exports=t},function(t,o){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(o){return"function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?t.exports=n=function(t){return e(t)}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},n(o)}t.exports=n},function(t,o){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,o){function e(o,n){return t.exports=e=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},e(o,n)}t.exports=e},function(t,o,e){"use strict";e.r(o);var n={_dao:null,_topics:{},_topicsOptions:{},_topicsData:{}};n._hOP=n._topics.hasOwnProperty,n._updateTopicData=function(t,o){var e=t;void 0!==n._topicsOptions[t]&&void 0!==n._topicsOptions[t].urlBuilder&&"function"==typeof n._topicsOptions[t].urlBuilder&&(e=n._topicsOptions[t].urlBuilder(t,n._topicsOptions[t])),n._dao.fetchResource(e,function(e){o?void 0!==e&&e.constructor===Array&&(n._topicsData[t]=n._topicsData[t].concat(e)):n._topicsData[t]=e,n._topics[t].forEach(function(o){o(void 0!==n._topicsData[t]?n._topicsData[t]:{})})})},n.setDAO=function(t){n._dao=t},n.createStore=function(t,o){n._topicsOptions[t]={},n._hOP.call(n._topics,t)||(void 0!==o&&(n._topicsOptions[t].urlBuilder=o),n._topics[t]=[],n._updateTopicData(t))},n.deleteStore=function(t){void 0!==n._topics[t]&&delete n._topics[t]},n.subscribe=function(t,o,e){var i=!1;void 0===e&&(e=!1),n._hOP.call(n._topics,t)||(n._topics[t]=[],i=!0);var r=n._topics[t].push(o)-1;return i||e?n._updateTopicData(t):o(n._topicsData[t]),{remove:function(){void 0!==n._topics[t]&&delete n._topics[t][r]}}},n.update=function(t,o,e){void 0===o&&(o=!1),n._hOP.call(n._topics,t)?(n._updateTopicData(t,o),void 0!==e&&e(!0)):void 0!==e&&e(!1)},n.publish=function(t,o,e,i){void 0===e&&(e="POST"),(n._hOP.call(n._topics,t)||void 0!==i)&&n._dao.setResource(t,o,function(o){n._hOP.call(n._topics,t)&&(n._topicsData[t]=o,n._topics[t].forEach(function(t){t(void 0!==o?o:{})})),void 0!==i&&i(void 0!==o?o:{})},e)};var i=n,r=e(0),s=e.n(r),u=e(1),c=e.n(u),a=function(){function t(o,e){s()(this,t),this.data=null,this.path=o,this.doUpdate=!1,this.stateKey=e,this.clientListener=function(){},this.subscription=null,this._subscribe()}return c()(t,[{key:"setClientListener",value:function(t){this.clientListener=t}},{key:"_subscribe",value:function(){var t=this;this.subscription=i.subscribe(this.path,function(o){t.data=o,t._updateClients()},this.doUpdate)}},{key:"_updateClients",value:function(){this.clientListener(this.stateKey,this.data)}},{key:"remove",value:function(){null!==this.subscription&&this.subscription.remove()}}]),t}(),p=e(2),f=e.n(p),l=e(3),d=e.n(l),_=e(4),y=e.n(_),b=e(5),h=function(t){function o(t){var e;return s()(this,o),(e=f()(this,d()(o).call(this,t)))._stores=[],e._instanciatedStores=[],e.storeCount=0,e.storeInitializedCount=0,e}return y()(o,t),c()(o,[{key:"setStores",value:function(t){this._stores=t}},{key:"componentWillMount",value:function(){var t=this;for(var o in this.storeCount=this._stores.length,this.storeInitializedCount=0,this._stores){var e=void 0;(e=Array.isArray(this._stores[o])?new this._stores[o][0](this._stores[o][1]):new this._stores[o])instanceof a&&(e.setClientListener(function(o,e){var n={};n[o]=e,t.setState(n),t.storeInitializedCount++}),this._instanciatedStores.push(e))}}},{key:"componentWillUnmount",value:function(){for(var t in this._instanciatedStores)this._instanciatedStores[t].remove()}},{key:"setInitialLoadingContent",set:function(t){this._initialLoadingContent=t,this._showInitialLoadingContent=!0}}]),o}(e.n(b).a.Component);e.d(o,"RPSStore",function(){return a}),e.d(o,"RPSComponent",function(){return h});o.default=i}])});